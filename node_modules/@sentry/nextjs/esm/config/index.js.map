{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/config/index.ts"],"names":[],"mappings":";AACA,OAAO,EAAE,8BAA8B,EAAE,MAAM,WAAW,CAAC;AAE3D;;;;;;GAMG;AACH,MAAM,UAAU,gBAAgB,CAC9B,cAAuC,EACvC,8BAAwE;IADxE,+BAAA,EAAA,mBAAuC;IACvC,+CAAA,EAAA,mCAAwE;IAExE,4GAA4G;IAC5G,gEAAgE;IAChE,IAAI,OAAO,cAAc,KAAK,UAAU,EAAE;QACxC,OAAO,UAAU,KAAa,EAAE,QAA6C;YAC3E,IAAM,0BAA0B,GAAG,cAAc,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;YACnE,6BACK,0BAA0B,KAC7B,OAAO,EAAE,8BAA8B,CAAC,0BAA0B,EAAE,8BAA8B,CAAC,IACnG;QACJ,CAAC,CAAC;KACH;IAED,4EAA4E;IAC5E,6BACK,cAAc,KACjB,OAAO,EAAE,8BAA8B,CAAC,cAAc,EAAE,8BAA8B,CAAC,IACvF;AACJ,CAAC","sourcesContent":["import { ExportedNextConfig, NextConfigFunction, NextConfigObject, SentryWebpackPluginOptions } from './types';\nimport { constructWebpackConfigFunction } from './webpack';\n\n/**\n * Add Sentry options to the config to be exported from the user's `next.config.js` file.\n *\n * @param userNextConfig The existing config to be exported prior to adding Sentry\n * @param userSentryWebpackPluginOptions Configuration for SentryWebpackPlugin\n * @returns The modified config to be exported\n */\nexport function withSentryConfig(\n  userNextConfig: ExportedNextConfig = {},\n  userSentryWebpackPluginOptions: Partial<SentryWebpackPluginOptions> = {},\n): NextConfigFunction | Partial<NextConfigObject> {\n  // If the user has passed us a function, we need to return a function, so that we have access to `phase` and\n  // `defaults` in order to pass them along to the user's function\n  if (typeof userNextConfig === 'function') {\n    return function (phase: string, defaults: { defaultConfig: NextConfigObject }): Partial<NextConfigObject> {\n      const materializedUserNextConfig = userNextConfig(phase, defaults);\n      return {\n        ...materializedUserNextConfig,\n        webpack: constructWebpackConfigFunction(materializedUserNextConfig, userSentryWebpackPluginOptions),\n      };\n    };\n  }\n\n  // Otherwise, we can just merge their config with ours and return an object.\n  return {\n    ...userNextConfig,\n    webpack: constructWebpackConfigFunction(userNextConfig, userSentryWebpackPluginOptions),\n  };\n}\n"]}